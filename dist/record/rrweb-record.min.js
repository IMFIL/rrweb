var rrwebRecord=function(){"use strict";var e,t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(e||(e={}));var n=1;function r(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).reduce(function(e,t){return e+(function(e){return"styleSheet"in e}(n=t)?r(n.styleSheet)||"":n.cssText);var n},""):null}catch(e){return null}}var o=/url\((?:'([^']*)'|"([^"]*)"|([^)]*))\)/gm,a=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/).*/,i=/^(data:)([\w\/\+\-]+);(charset=[\w-]+|base64).*,(.*)/i;function u(e,t){return e.replace(o,function(e,n,r,o){var u,c=n||r||o;if(!c)return e;if(!a.test(c))return"url('"+c+"')";if(i.test(c))return"url("+c+")";if("/"===c[0])return"url('"+(((u=t).indexOf("//")>-1?u.split("/").slice(0,3).join("/"):u.split("/")[0]).split("?")[0]+c)+"')";var s=t.split("/"),l=c.split("/");s.pop();for(var d=0,p=l;d<p.length;d++){var f=p[d];"."!==f&&(".."===f?s.pop():s.push(f))}return"url('"+s.join("/")+"')"})}function c(e,t){return""===t.trim()?t:t.split(",").map(function(t){var n=t.trimLeft().trimRight().split(" ");return 2===n.length?s(e,n[0])+" "+n[1]:1===n.length?""+s(e,n[0]):""}).join(",")}function s(e,t){if(""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function l(t,o,a,i,d,p,f){void 0===d&&(d=!1),void 0===p&&(p=!0),void 0===f&&(f=!1);var m,h=function(t,n,o,a,i){switch(t.nodeType){case t.DOCUMENT_NODE:return{type:e.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:e.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId};case t.ELEMENT_NODE:var l=!1;"string"==typeof o?l=t.classList.contains(o):t.classList.forEach(function(e){o.test(e)&&(l=!0)});for(var d=t.tagName.toLowerCase(),p={},f=0,m=Array.from(t.attributes);f<m.length;f++){var h=m[f],v=h.name,y=h.value;p[v]="src"===v||"href"===v?s(n,y):"srcset"==v?c(n,y):"style"===v?u(y,location.href):y}if("link"===d&&a){var g,b=Array.from(n.styleSheets).find(function(e){return e.href===t.href});(g=r(b))&&(delete p.rel,delete p.href,p._cssText=u(g,b.href))}if("style"===d&&t.sheet&&!(t.innerText||t.textContent||"").trim().length&&(g=r(t.sheet))&&(p._cssText=u(g,location.href)),"input"!==d&&"textarea"!==d&&"select"!==d||(y=t.value,"radio"!==p.type&&"checkbox"!==p.type&&y?p.value=i?"*".repeat(y.length):y:t.checked&&(p.checked=t.checked)),"option"===d){var E=t.parentElement;p.value===E.value&&(p.selected=t.selected)}if("canvas"===d&&(p.rr_dataURL=t.toDataURL()),l){var C=t.getBoundingClientRect(),w=C.width,N=C.height;p.rr_width=w+"px",p.rr_height=N+"px"}return{type:e.Element,tagName:d,attributes:p,childNodes:[],isSVG:(D=t,"svg"===D.tagName||D instanceof SVGElement||void 0),needBlock:l};case t.TEXT_NODE:var T=t.parentNode&&t.parentNode.tagName,I=t.textContent,S="STYLE"===T||void 0;return S&&I&&(I=u(I,location.href)),"SCRIPT"===T&&(I="SCRIPT_PLACEHOLDER"),{type:e.Text,textContent:I||"",isStyle:S};case t.CDATA_SECTION_NODE:return{type:e.CDATA,textContent:""};case t.COMMENT_NODE:return{type:e.Comment,textContent:t.textContent||""};default:return!1}var D}(t,o,i,p,f);if(!h)return console.warn(t,"not serialized"),null;m="__sn"in t?t.__sn.id:n++;var v=Object.assign(h,{id:m});t.__sn=v,a[m]=t;var y=!d;if(v.type===e.Element&&(y=y&&!v.needBlock,delete v.needBlock),(v.type===e.Document||v.type===e.Element)&&y)for(var g=0,b=Array.from(t.childNodes);g<b.length;g++){var E=l(b[g],o,a,i,d,p,f);E&&v.childNodes.push(E)}return v}function d(e,t,n){void 0===n&&(n=document);var r={capture:!0,passive:!0};return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}var p,f,m,h,v={map:{},getId:function(e){return e.__sn?e.__sn.id:-1},getNode:function(e){return v.map[e]||null},removeNodeFromMap:function(e){var t=e.__sn&&e.__sn.id;delete v.map[t],e.childNodes&&e.childNodes.forEach(function(e){return v.removeNodeFromMap(e)})},has:function(e){return v.map.hasOwnProperty(e)}};function y(e,t,n){void 0===n&&(n={});var r=null,o=0;return function(a){var i=Date.now();o||!1!==n.leading||(o=i);var u=t-(i-o),c=this,s=arguments;u<=0||u>t?(r&&(window.clearTimeout(r),r=null),o=i,e.apply(c,s)):r||!1===n.trailing||(r=window.setTimeout(function(){o=!1===n.leading?0:Date.now(),r=null,e.apply(c,s)},u))}}function g(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function b(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function E(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;return"string"==typeof t?n=e.classList.contains(t):e.classList.forEach(function(e){t.test(e)&&(n=!0)}),n||E(e.parentNode,t)}return E(e.parentNode,t)}function C(e){return Boolean(e.changedTouches)}function w(e,t){e.delete(t),t.childNodes.forEach(function(t){return w(e,t)})}function N(e,t){var n=t.parentNode;if(!n)return!1;var r=v.getId(n);return!!e.some(function(e){return e.id===r})||N(e,n)}function T(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||T(e,n))}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom"}(p||(p={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove"}(f||(f={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd"}(m||(m={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction"}(h||(h={}));var I=function(e,t){return e+"@"+t};function S(e){return"__sn"in e}function D(e,t,n,r){var o=new MutationObserver(function(o){var a=[],i=[],u=[],c=[],s=new Set,d=new Set,p=new Set,f={},m=function(e,n){if(!E(e,t)){if(S(e)){d.add(e);var r=null;n&&S(n)&&(r=n.__sn.id),r&&(f[I(e.__sn.id,r)]=!0)}else s.add(e),p.delete(e);e.childNodes.forEach(function(e){return m(e)})}};o.forEach(function(e){var n=e.type,r=e.target,o=e.oldValue,c=e.addedNodes,l=e.removedNodes,h=e.attributeName;switch(n){case"characterData":var y=r.textContent;E(r,t)||y===o||a.push({value:y,node:r});break;case"attributes":y=r.getAttribute(h);if(E(r,t)||y===o)return;var g=i.find(function(e){return e.node===r});g||(g={node:r,attributes:{}},i.push(g)),g.attributes[h]=y;break;case"childList":c.forEach(function(e){return m(e,r)}),l.forEach(function(e){var n=v.getId(e),o=v.getId(r);E(e,t)||(s.has(e)?(w(s,e),p.add(e)):s.has(r)&&-1===n||function e(t){var n=v.getId(t);return!v.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode))}(r)||(d.has(e)&&f[I(n,o)]?w(d,e):u.push({parentId:o,id:n})),v.removeNodeFromMap(e))})}});for(var h=[],y=function(e){var o=v.getId(e.parentNode);if(-1===o)return h.push(e);c.push({parentId:o,previousId:e.previousSibling?v.getId(e.previousSibling):e.previousSibling,nextId:e.nextSibling?v.getId(e.nextSibling):e.nextSibling,node:l(e,document,v.map,t,!0,n,r)})},g=d.values(),b=null;b=g.next().value;)y(b);for(g=s.values(),b=null;b=g.next().value;)T(p,b)||N(u,b)?T(d,b)?y(b):p.add(b):y(b);for(;h.length&&!h.every(function(e){return-1===v.getId(e.parentNode)});)y(h.shift());var C={texts:a.map(function(e){return{id:v.getId(e.node),value:e.value}}).filter(function(e){return v.has(e.id)}),attributes:i.map(function(e){return{id:v.getId(e.node),attributes:e.attributes}}).filter(function(e){return v.has(e.id)}),removes:u,adds:c};(C.texts.length||C.attributes.length||C.removes.length||C.adds.length)&&e(C)});return o.observe(document,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}function M(e,t){var n=[];return Object.keys(m).filter(function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")}).forEach(function(r){var o=r.toLowerCase(),a=function(n){return function(r){if(!E(r.target,t)){var o=v.getId(r.target),a=C(r)?r.changedTouches[0]:r,i=a.clientX,u=a.clientY;e({type:m[n],id:o,x:i,y:u})}}}(r);n.push(d(o,a))}),function(){n.forEach(function(e){return e()})}}var k,x=["INPUT","TEXTAREA","SELECT"],L=["color","date","datetime-local","email","month","number","range","search","tel","text","time","url","week"],_=new WeakMap;function O(e,n,r,o){function a(e){var t=e.target;if(t&&t.tagName&&!(x.indexOf(t.tagName)<0)&&!E(t,n)){var a=t.type;if("password"!==a&&!t.classList.contains(r)){var u=t.value,c=!1,s=L.includes(a)||"TEXTAREA"===t.tagName;"radio"===a||"checkbox"===a?c=t.checked:s&&o&&(u="*".repeat(u.length)),i(t,{text:u,isChecked:c});var l=t.name;"radio"===a&&l&&c&&document.querySelectorAll('input[type="radio"][name="'+l+'"]').forEach(function(e){e!==t&&i(e,{text:e.value,isChecked:!c})})}}}function i(n,r){var o=_.get(n);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){_.set(n,r);var a=v.getId(n);e(t(t({},r),{id:a}))}}var u=["input","change"].map(function(e){return d(e,a)}),c=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),s=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"]];return c&&c.set&&u.push.apply(u,s.map(function(e){return function e(t,n,r,o){var a=Object.getOwnPropertyDescriptor(t,n);return Object.defineProperty(t,n,o?r:{set:function(e){var t=this;setTimeout(function(){r.set.call(t,e)},0),a&&a.set&&a.set.call(this,e)}}),function(){return e(t,n,a||{},!0)}}(e[0],e[1],{set:function(){a({target:this})}})})),function(){u.forEach(function(e){return e()})}}function A(e,t){void 0===t&&(t={}),function(e,t){var n=e.mutationCb,r=e.mousemoveCb,o=e.mouseInteractionCb,a=e.scrollCb,i=e.viewportResizeCb,u=e.inputCb;e.mutationCb=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.mutation&&t.mutation.apply(t,e),n.apply(void 0,e)},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,e),r.apply(void 0,e)},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,e),o.apply(void 0,e)},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,e),a.apply(void 0,e)},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,e),i.apply(void 0,e)},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,e),u.apply(void 0,e)}}(e,t);var n,r,o,a,i,u,c=D(e.mutationCb,e.blockClass,e.inlineStylesheet,e.maskAllInputs),s=(n=e.mousemoveCb,o=[],a=y(function(e){var t=Date.now()-r;n(o.map(function(e){return e.timeOffset-=t,e}),e?f.TouchMove:f.MouseMove),o=[],r=null},500),i=y(function(e){var t=e.target,n=C(e)?e.changedTouches[0]:e,i=n.clientX,u=n.clientY;r||(r=Date.now()),o.push({x:i,y:u,id:v.getId(t),timeOffset:Date.now()-r}),a(C(e))},50,{trailing:!1}),u=[d("mousemove",i),d("touchmove",i)],function(){u.forEach(function(e){return e()})}),l=M(e.mouseInteractionCb,e.blockClass),p=function(e,t){return d("scroll",y(function(n){if(n.target&&!E(n.target,t)){var r=v.getId(n.target);if(n.target===document){var o=document.scrollingElement||document.documentElement;e({id:r,x:o.scrollLeft,y:o.scrollTop})}else e({id:r,x:n.target.scrollLeft,y:n.target.scrollTop})}},100))}(e.scrollCb,e.blockClass),m=function(e){return d("resize",y(function(){var t=g(),n=b();e({width:Number(n),height:Number(t)})},200),window)}(e.viewportResizeCb),h=O(e.inputCb,e.blockClass,e.ignoreClass,e.maskAllInputs);return function(){c.disconnect(),s(),l(),p(),m(),h()}}function R(e){return t(t({},e),{timestamp:Date.now()})}function z(e){void 0===e&&(e={});var n,r=e.emit,o=e.checkoutEveryNms,a=e.checkoutEveryNth,i=e.blockClass,u=void 0===i?"rr-block":i,c=e.ignoreClass,s=void 0===c?"rr-ignore":c,m=e.inlineStylesheet,h=void 0===m||m,y=e.maskAllInputs,E=void 0!==y&&y,C=e.hooks;if(!r)throw new Error("emit function is required");"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);var w=0;function N(e){void 0===e&&(e=!1),k(R({type:p.Meta,data:{href:window.location.href,width:b(),height:g()}}),e);var t=function(e,t,n,r){void 0===t&&(t="rr-block"),void 0===n&&(n=!0),void 0===r&&(r=!1);var o={};return[l(e,e,o,t,!1,n,r),o]}(document,u,h,E),n=t[0],r=t[1];if(!n)return console.warn("Failed to snapshot the document");v.map=r,k(R({type:p.FullSnapshot,data:{node:n,initialOffset:{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}}}))}k=function(e,t){if(r(e,t),e.type===p.FullSnapshot)n=e,w=0;else if(e.type===p.IncrementalSnapshot){w++;var i=a&&w>=a,u=o&&e.timestamp-n.timestamp>o;(i||u)&&N(!0)}};try{var T=[];T.push(d("DOMContentLoaded",function(){k(R({type:p.DomContentLoaded,data:{}}))}));var I=function(){N(),T.push(A({mutationCb:function(e){return k(R({type:p.IncrementalSnapshot,data:t({source:f.Mutation},e)}))},mousemoveCb:function(e,t){return k(R({type:p.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return k(R({type:p.IncrementalSnapshot,data:t({source:f.MouseInteraction},e)}))},scrollCb:function(e){return k(R({type:p.IncrementalSnapshot,data:t({source:f.Scroll},e)}))},viewportResizeCb:function(e){return k(R({type:p.IncrementalSnapshot,data:t({source:f.ViewportResize},e)}))},inputCb:function(e){return k(R({type:p.IncrementalSnapshot,data:t({source:f.Input},e)}))},blockClass:u,ignoreClass:s,maskAllInputs:E,inlineStylesheet:h},C))};return"interactive"===document.readyState||"complete"===document.readyState?I():T.push(d("load",function(){k(R({type:p.Load,data:{}})),I()},window)),function(){T.forEach(function(e){return e()})}}catch(e){console.warn(e)}}return z.addCustomEvent=function(e,t){if(!k)throw new Error("please add custom event after start recording");k(R({type:p.Custom,data:{tag:e,payload:t}}))},z}();
//# sourceMappingURL=rrweb-record.min.js.map
